# Sets prefix to ctrl + space
# On macOS, check System Settings > Keyboad > Keyboard Shortcuts > Input Sources
# to make sure that the ctrl + space combo isn't being overriden by the system.
set -g prefix C-Space
bind C-Space send-prefix

# Reload tmux config
bind r {
    source-file ~/.config/tmux/tmux.conf
    display "Config reloaded"
}

# Split new pane from current path
bind -n C-M-, split-window -v -c "#{pane_current_path}"
bind -n C-M-h split-window -h -c "#{pane_current_path}"

# Kill pane with confirmation
bind -n C-M-. confirm-before -p "Kill pane #P?" kill-pane

# Switch panes using Ctrl-Alt-neio (colemak) without prefix
bind -n C-M-n select-pane -L
bind -n C-M-e select-pane -D
bind -n C-M-i select-pane -U
bind -n C-M-o select-pane -R

# Create new window
bind -n C-M-c new-window -c '#{pane_current_path}' -a -t '{next}'

# Kill current window
bind -n C-M-x confirm-before -p "Kill window? (y/n)" kill-window

# Switch between windows.
bind -n C-M-u next-window
bind -n C-M-y previous-window

# Moves pane to different window
# 1. Navigate to destination window
# 2. Press key binding
# 3. Select pane to move using arrow. Right arrow will expand panes, left will collapse.
bind C-M-s choose-window "move-pane -h -s '%%'" # Destination will be horizontal pane
bind C-M-t choose-window "move-pane -v -s '%%'" # Destination will be vertical pane

set -g @floax-bind '-n M-p'
set -g @floax-width '80%'
set -g @floax-height '80%'

# Open sesh popup to create or switch sessions
# Must have sesh installed
# https://github.com/joshmedeski/sesh
bind-key "k" display-popup -E -w 40% "sesh connect \"$(
  sesh list -i | gum filter --limit 1 --placeholder 'Pick a sesh' --prompt='âš¡'
)\""

#  +-+-+-+-+-+-+-+ +-+-+-+-+-+-+-+-+
#  |D|e|f|a|u|l|t| |B|i|n|d|i|n|g|s|
#  +-+-+-+-+-+-+-+ +-+-+-+-+-+-+-+-+
# Used for referencing, try not to chang anything below this.

# # Basic window management
# bind Space next-layout
# bind ! break-pane
# bind '"' split-window -v
# bind '#' list-buffers
# bind '$' command-prompt -I "#S" "rename-session '%%'"
# bind % split-window -h
# bind & confirm-before -p "kill-window #W? (y/n)" kill-window
# bind "'" command-prompt -p "window index:" "select-window -t ':%%'"
# bind ( switch-client -p
# bind ) switch-client -n
# bind , command-prompt -I "#W" "rename-window '%%'"
# bind - delete-buffer
# bind . command-prompt -p "move window to:" "move-window -t '%%'"
# bind / command-prompt -k -p "key binding:" "list-keys -1N \"%%%\""

# # # Window selection
# bind 0 select-window -t :=0
# bind 1 select-window -t :=1
# bind 2 select-window -t :=2
# bind 3 select-window -t :=3
# bind 4 select-window -t :=4
# bind 5 select-window -t :=5
# bind 6 select-window -t :=6
# bind 7 select-window -t :=7
# bind 8 select-window -t :=8
# bind 9 select-window -t :=9

# # # Command prompt and management
# bind : command-prompt
# bind \; last-pane
# bind = choose-buffer
# bind ? list-keys # List all key bindings
# bind C customize-mode
# bind D choose-client
# bind E select-layout -E
# bind L switch-client -l
# bind M select-pane -M
# bind [ copy-mode
# bind ] paste-buffer
# bind c new-window
# bind d detach-client
# bind f command-prompt "find-window '%%'"
# bind i display-message
# bind l last-window
# bind m select-pane -m
# bind n next-window
# bind o select-pane -t :.+
# bind p previous-window
# bind q display-panes
# bind s choose-session
# bind t clock-mode
# bind w choose-window
# bind x confirm-before -p "kill-pane #P? (y/n)" kill-pane
# bind z resize-pane -Z
# bind '{' swap-pane -U
# bind '}' swap-pane -D
# bind '~' show-messages

# # Special keys
# bind DC refresh-client -c
# bind PPage copy-mode -u

# # Pane navigation
# bind Up select-pane -U
# bind Down select-pane -D
# bind Left select-pane -L
# bind Right select-pane -R

# # Layout keys with Meta (Alt)
# bind M-1 select-layout even-horizontal
# bind M-2 select-layout even-vertical
# bind M-3 select-layout main-horizontal
# bind M-4 select-layout main-vertical
# bind M-5 select-layout tiled
# bind M-6 select-layout main-horizontal-mirrored
# bind M-7 select-layout main-vertical-mirrored

# # Window alerts
# bind M-n next-window -a
# bind M-o rotate-window -D
# bind M-p previous-window -a

# # Pane resizing with Meta (Alt)
# bind -r M-Up resize-pane -U 5
# bind -r M-Down resize-pane -D 5
# bind -r M-Left resize-pane -L 5
# bind -r M-Right resize-pane -R 5

# # Special control keys
# bind C-b send-prefix
# bind C-o rotate-window
# bind C-z suspend-client

# # Pane resizing with Control
# bind -r C-Up resize-pane -U
# bind -r C-Down resize-pane -D
# bind -r C-Left resize-pane -L
# bind -r C-Right resize-pane -R

# # Moving the visible part with Shift
# bind S-Up refresh-client -U
# bind S-Down refresh-client -D
# bind S-Left refresh-client -L
# bind S-Right refresh-client -R
